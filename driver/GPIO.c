/******************************************************************************
* File Name: GPIO.c
* Description: This file contains API definitions for GPIO functionality
* Tool-Chain: AVR GCC
*
* Created by: 2005557_Viraj 16/Feb/21
******************************************************************************/

/******************************************************************************
* Includes
******************************************************************************/
#include "GPIO.h"

/******************************************************************************
* Defines and data types
******************************************************************************/

/******************************************************************************
* Global variables
******************************************************************************/

/******************************************************************************
* Static variables
******************************************************************************/

/******************************************************************************
* Internal function prototypes
******************************************************************************/

/******************************************************************************
* Public functions definitions
******************************************************************************/

/* ---------------------------------------------------------------------------
* Name: GPIO_config (pin, state)
* Description: Configures the mode of the pin as INPUT/PULLUP or OUTPUT
* Arguments: pin and state
* Returns: None
  ------------------------------------------------------------------------  */
void GPIO_config(uint8_t PIN, uint8_t STATE)
{
    if(STATE == OUTPUT)
    {
        SET_BIT(DDRD, PIN);
    }
    else
    {
        CLR_BIT(DDRD, PIN);
        SET_BIT(PORTD, PIN);
    }
}

/* ---------------------------------------------------------------------------
* Name: GPIO_pin_write (pin, mode)
* Description: sets the mode of the pin either HIGH or LOW
* Arguments: pin and mode
* Returns: None
  ------------------------------------------------------------------------  */
void GPIO_pin_write(uint8_t PIN, uint8_t MODE)
{
    if(MODE == HIGH)
    {
        SET_BIT(PORTD, PIN);
    }
    else
    {
        CLR_BIT(PORTD, PIN);
    }
}

/* ---------------------------------------------------------------------------
* Name: GPIO_pin_read (pin)
* Description: reads the status of the pin
* Arguments: pin
* Returns: 1 or 0
  ------------------------------------------------------------------------  */
uint8_t GPIO_pin_read(uint8_t PIN)
{
    if(PIND & (1 << PIN))  // if pin is high
    {
        return 1;
    }
    else
    {
        return 0;
    }
}

/******************************************************************************
* Internal functions
******************************************************************************/

/* ****************************************************************************
* Name:
* Description:
******************************************************************************/

/******************************************************************************
* End of File
******************************************************************************/
